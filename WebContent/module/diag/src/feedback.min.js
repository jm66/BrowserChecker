(function(e,a,k){if(e.Feedback===k){var u=function(b){e.console.log(b)},D=function(b){for(var a=0,c=b.length;a<c;a++){var d=Array.prototype.pop.call(b);d!==k&&d.parentNode!==null&&d.parentNode.removeChild(d)}},M=function(b){for(var a;(a=b.firstChild)!==null&&b.removeChild(a););},m=function(b,c){var e=a.createElement(b);e.appendChild(a.createTextNode(c));return e},N=function(b,a){if(b.onload===k)if(b.onreadystatechange!==k){var c=function(){b.readyState!=="loaded"&&b.readyState!=="complete"?e.setTimeout(c,
250):a()};e.setTimeout(c,250)}else u("ERROR: We can't track when script is loaded");else return a},c,E=!1,F=!1,i,f,o,p,I="canvas",v="div",q="px",y,G,j,J,H,B="data-exclude";e.Feedback={debug:!0,log:u,init:function(b){var n,l,d=a.body,r=a.createElement(v),K={open:function(){function z(){var b=!0;if(F)p.onclick=function(b){b.preventDefault();d.removeEventListener("mousemove",G,!1);d.removeEventListener("click",H,!1);K.review()};if(E&&F){p.disabled=!1;var L,h,x,t=function(a){a.preventDefault();u.classList.toggle("active");
C.classList.toggle("active");b=!b},z=function(){i.style.left="-5px";i.style.top="-5px";i.style.width="0px";i.style.height="0px";i.setAttribute(B,!0);f.style.left="-5px";f.style.top="-5px";f.style.width="0px";f.style.height="0px";f.setAttribute(B,!0);e.clearTimeout(L)},r=function(){o.style.left="-50px";o.style.top="-50px"},u=m("a","Blackout"),C=m("a","Highlight"),w;G=function(a){if(a.target!==w&&(a.target.classList.contains("feedback-blackedout")||a.target.classList.contains("feedback-highlighted"))){var d=
parseInt(a.target.style.left,10)+parseInt(a.target.style.width,10),d=Math.max(d,10),d=Math.min(d,e.innerWidth-15),j=parseInt(a.target.style.top,10),j=Math.max(j,10);o.style.left=d+q;o.style.top=j+q;h=a.target;z();w=k}else if(a.target.nodeName==="BODY"||a.target===o||a.target===l||a.target===p||a.target.parentNode===l||a.target.parentNode===g)z(),w=a.target;else if(r(),a.target!==w)w=a.target,e.clearTimeout(L),L=e.setTimeout(function(){var a=w.getBoundingClientRect(),d;b===!1?d=i:(d=f,d.width=a.width,
d.height=a.height,x.drawImage(c,e.pageXOffset+a.left,e.pageYOffset+a.top,a.width,a.height,0,0,a.width,a.height));d.setAttribute(B,!1);d.style.left=e.pageXOffset+a.left+q;d.style.top=e.pageYOffset+a.top+q;d.style.width=a.width+q;d.style.height=a.height+q},100)};H=function(c){if(n.disabled!==!1)if(c.preventDefault(),b===!1){if(i.getAttribute(B)==="false")c=a.createElement(v),c.classList.add("feedback-blackedout"),c.style.left=i.style.left,c.style.top=i.style.top,c.style.width=i.style.width,c.style.height=
i.style.height,d.appendChild(c),w=k}else f.getAttribute(B)==="false"&&(f.classList.add("feedback-highlighted"),f.classList.remove("feedback-highlight-element"),f=a.createElement("canvas"),x=f.getContext("2d"),f.classList.add("feedback-highlight-element"),d.appendChild(f),z(),w=k)};l.classList.add("feedback-animate-toside");i=a.createElement("div");f=a.createElement(I);x=f.getContext("2d");o=m(v,"\u00d7");y=a.createElement("div");o.id="feedback-highlight-close";o.addEventListener("click",function(){h.parentNode.removeChild(h);
r()},!1);d.appendChild(o);c.classList.add("feedback-canvas");d.appendChild(c);var A=[C,u];j.appendChild(m("p","Highlight or blackout important information"));for(var s=0;s<2;s++)A[s].classList.add("btn"),A[s].classList.add("btn-small"),A[s].classList.add(s===0?"active":"btn-inverse"),A[s].href="#",A[s].onclick=t,j.appendChild(A[s]),j.appendChild(a.createTextNode(" "));y.id="feedback-highlight-container";y.style.width=c.width+q;y.style.height=c.height+q;f.classList.add("feedback-highlight-element");
i.id="feedback-blackout-element";d.appendChild(f);y.appendChild(i);d.appendChild(y);d.addEventListener("mousemove",G,!1);d.addEventListener("click",H,!1)}}var g=a.createElement(v),h=a.createElement(v),t,C=function(){try{b.onrendered=b.onrendered||function(a){c=a;E=!0;z()},e.html2canvas([a.body],b)}catch(d){E=!0,z(),u("Error in html2canvas: "+d.message)}},x=m("a",b.closeLabel||"\u00d7");j=a.createElement(v);d.appendChild(r);J=a.createElement("textarea");e.html2canvas===k&&t===k?(t=a.createElement("script"),
t.src=b.h2cPath||"libs/html2canvas.js",t.onerror=function(){u("Failed to load html2canvas library, check that the path is correctly defined")},t.onload=N(t,function(){e.html2canvas===k?u("Loaded html2canvas, but library not found"):(e.html2canvas.logging=e.Feedback.debug,C())}),n.parentNode.appendChild(t)):C();x.className=b.closeClass||"close";x.onclick=K.close;x.href="#";n.disabled=!0;g.appendChild(x);g.appendChild(m("h3",b.modalHeader||"Send Feedback"));g.className="feedback-header";j.className=
"feedback-body";j.appendChild(m("p",b.modalIntro||"Please describe the issue you are experiencing"));j.appendChild(J);p=m("button",b.nextLabel||"Continue");p.className=b.buttonClass||"btn";p.onclick=function(){F=!0;p.disabled=!0;M(j);z()};h.className="feedback-footer";h.appendChild(p);l=a.createElement(v);l.className=b.modalClass||"modal";l.setAttribute("data-html2canvas-ignore",!0);l.appendChild(g);l.appendChild(j);l.appendChild(h);n.parentNode.appendChild(l)},review:function(){l.classList.add("feedback-animate-review");
M(j);var e=a.createElement(v);if(c!==k){var g=c.getContext("2d"),h,f;g.fillStyle="#000";Array.prototype.slice.call(a.getElementsByClassName("feedback-blackedout"),0).forEach(function(a){var b=a.getBoundingClientRect();g.fillRect(b.left,b.top,b.width,b.height);d.removeChild(a)});var i=Array.prototype.slice.call(a.getElementsByClassName("feedback-highlighted"),0);if(i.length>0)h=a.createElement(I),f=h.getContext("2d"),h.width=c.width,h.height=c.height,f.drawImage(c,0,0),g.fillStyle="#777",g.globalAlpha=
0.5,g.fillRect(0,0,c.width,c.height),g.beginPath(),i.forEach(function(a){a.getBoundingClientRect();var b=parseInt(a.style.left,10),c=parseInt(a.style.top,10),e=parseInt(a.style.width,10),f=parseInt(a.style.height,10);g.moveTo(b+5,c);g.lineTo(b+e-5,c);g.quadraticCurveTo(b+e,c,b+e,c+5);g.lineTo(b+e,c+f-5);g.quadraticCurveTo(b+e,c+f,b+e-5,c+f);g.lineTo(b+5,c+f);g.quadraticCurveTo(b,c+f,b,c+f-5);g.lineTo(b,c+5);g.quadraticCurveTo(b,c,b+5,c);d.removeChild(a)}),g.closePath(),g.clip(),g.globalAlpha=1,g.drawImage(h,
0,0),D([r]);h=a.createElement(I);f=h.getContext("2d");h.width=300;h.height=Math.round(c.height*(h.width/c.width));f.drawImage(c,0,0,c.width,c.height,0,0,h.width,h.height);j.appendChild(h);p.firstChild.nodeValue="Send form";c.classList.add("feedback-canvas-complete");e.style.height=h.height+20+q}e.classList.add("feedback-browser");e.appendChild(m("h3","Browser information"));j.appendChild(e);j.appendChild(m("p",b.modalIntro||"Please describe the issue you are experiencing"));j.appendChild(J)},close:function(){F=
E=n.disabled=!1;D([l,r,i,f,o,y,c]);D(a.getElementsByClassName("feedback-blackedout"));D(a.getElementsByClassName("feedback-highlighted"));d.removeEventListener("mousemove",G,!1);d.removeEventListener("click",H,!1);c=k;return!1}};r.classList.add("feedback-glass");r.style.pointerEvents="none";r.setAttribute("data-html2canvas-ignore",!0);b=b||{};n=m("button",b.label||"Send Feedback");n.className=b.labelClass||"btn bottom-right";n.setAttribute("data-html2canvas-ignore",!0);n.onclick=K.open;(b.appendTo!==
k?b.appendTo:a.body).appendChild(n)}}}})(window,document);
